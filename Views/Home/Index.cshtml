<!--@* --- CÓDIGO TEMPORAL PARA VER EL TOKEN --- *@
@if (TempData["jwt"] != null)
{
    <div class="alert alert-info">
        <strong>Tu Token JWT (Cópialo):</strong>
        <textarea class="form-control" rows="3">@TempData["jwt"]</textarea>
    </div>
}
@* ---------------------------------------- *@ -->
@{
    ViewData["Title"] = "Dashboard";
}

<div class="mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4">
    <div>
        <h2 class="text-2xl font-bold text-gray-800">Panel General</h2>
        <p class="text-gray-500 text-sm">Resumen de actividad del taller</p>
    </div>
    <div class="flex gap-2">
        <a asp-controller="OrdenesTrabajo" asp-action="Create" class="bg-primary hover:bg-primaryDark text-white px-4 py-2 rounded-lg text-sm font-medium transition shadow-md flex items-center gap-2">
            <i class="bi bi-plus-lg"></i> Nueva Orden
        </a>
    </div>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">

    <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow group">
        <div class="flex justify-between items-start">
            <div>
                <p class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-1">Pendientes</p>
                <h3 class="text-3xl font-bold text-gray-800 group-hover:text-primary transition-colors">@ViewBag.OrdenesPendientes</h3>
            </div>
            <div class="p-3 bg-indigo-50 text-primary rounded-xl">
                <i class="bi bi-hourglass-split text-xl"></i>
            </div>
        </div>
        <div class="mt-4 flex items-center text-xs text-gray-400">
            <span class="text-green-500 font-medium bg-green-50 px-1.5 py-0.5 rounded mr-2">
                <i class="bi bi-arrow-up-short"></i> Activas
            </span>
            <span>Esperando revisión</span>
        </div>
    </div>

    <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow group">
        <div class="flex justify-between items-start">
            <div>
                <p class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-1">En Taller</p>
                <h3 class="text-3xl font-bold text-gray-800 group-hover:text-orange-500 transition-colors">@ViewBag.OrdenesEnReparacion</h3>
            </div>
            <div class="p-3 bg-orange-50 text-orange-500 rounded-xl">
                <i class="bi bi-tools text-xl"></i>
            </div>
        </div>
        <div class="mt-4 flex items-center text-xs text-gray-400">
            <span class="text-orange-500 font-medium bg-orange-50 px-1.5 py-0.5 rounded mr-2">
                <i class="bi bi-gear-fill"></i> Proceso
            </span>
            <span>Vehículos en reparación</span>
        </div>
    </div>

    <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow group">
        <div class="flex justify-between items-start">
            <div>
                <p class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-1">Finalizadas</p>
                <h3 class="text-3xl font-bold text-gray-800 group-hover:text-emerald-500 transition-colors">@ViewBag.OrdenesFinalizadas</h3>
            </div>
            <div class="p-3 bg-emerald-50 text-emerald-500 rounded-xl">
                <i class="bi bi-check-circle-fill text-xl"></i>
            </div>
        </div>
        <div class="mt-4 flex items-center text-xs text-gray-400">
            <span class="text-emerald-500 font-medium bg-emerald-50 px-1.5 py-0.5 rounded mr-2">
                <i class="bi bi-calendar-check"></i> Total
            </span>
            <span>Ciclo completado</span>
        </div>
    </div>

    <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow group">
        <div class="flex justify-between items-start">
            <div>
                <p class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-1">Stock Bajo</p>
                <h3 class="text-3xl font-bold text-gray-800 group-hover:text-red-500 transition-colors">@ViewBag.StockCritico</h3>
            </div>
            <div class="p-3 bg-red-50 text-red-500 rounded-xl">
                <i class="bi bi-exclamation-triangle-fill text-xl"></i>
            </div>
        </div>
        <div class="mt-4 flex items-center text-xs text-gray-400">
            <span class="text-red-500 font-medium bg-red-50 px-1.5 py-0.5 rounded mr-2">
                <i class="bi bi-arrow-down"></i> Alerta
            </span>
            <span>Reponer urgente</span>
        </div>
    </div>
</div>

<div class="grid grid-cols-1 xl:grid-cols-3 gap-6">
    
    <div class="xl:col-span-2 space-y-6">
        <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
            <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center">
                <h3 class="font-bold text-gray-800">📋 Órdenes Recientes</h3>
                <a asp-controller="OrdenesTrabajo" asp-action="Index" class="text-sm text-primary hover:underline">Ver todas</a>
            </div>
            <div class="p-0">
                @await Component.InvokeAsync("UltimasOTs")
            </div>
        </div>
    </div>

    <div class="space-y-6">
        <div class="bg-primary rounded-2xl shadow-lg p-6 text-white relative overflow-hidden">
            <div class="absolute -right-6 -top-6 bg-white/10 w-32 h-32 rounded-full"></div>
            <div class="absolute -left-6 -bottom-6 bg-white/10 w-24 h-24 rounded-full"></div>
            
            <h3 class="text-lg font-bold relative z-10">Estado del Sistema</h3>
            <p class="text-primary-100 text-sm mt-1 relative z-10 mb-4">Todo funcionando correctamente.</p>
            
            <a asp-controller="Reportes" asp-action="Index" class="bg-white text-primary px-4 py-2 rounded-lg text-sm font-bold shadow-sm hover:bg-gray-50 transition w-full relative z-10 text-center block">
    Ver Reportes
</a>
        </div>

        <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
            <h3 class="font-bold text-gray-800 mb-4">Acciones Rápidas</h3>
            <div class="space-y-3">
                <a asp-controller="Vehiculos" asp-action="Create" class="flex items-center p-3 rounded-xl hover:bg-gray-50 transition border border-gray-100">
                    <div class="w-10 h-10 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center mr-3">
                        <i class="bi bi-car-front-fill"></i>
                    </div>
                    <div>
                        <p class="font-medium text-sm text-gray-700">Registrar Vehículo</p>
                        <p class="text-xs text-gray-400">Nuevo ingreso</p>
                    </div>
                </a>
                
                <a asp-controller="Clientes" asp-action="Create" class="flex items-center p-3 rounded-xl hover:bg-gray-50 transition border border-gray-100">
                    <div class="w-10 h-10 rounded-full bg-purple-50 text-purple-600 flex items-center justify-center mr-3">
                        <i class="bi bi-person-plus-fill"></i>
                    </div>
                    <div>
                        <p class="font-medium text-sm text-gray-700">Nuevo Cliente</p>
                        <p class="text-xs text-gray-400">Alta de usuario</p>
                    </div>
                </a>
            </div>
        </div>
    </div>
</div>